<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚«ãƒŠãƒ€çµ¦æ¹¯å™¨é¸å®šã‚¬ã‚¤ãƒ‰ - ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒƒã‚­</title>
    
    <!-- Google Fonts: Inter (ãƒ“ã‚¸ãƒã‚¹ãƒ©ã‚¤ã‚¯ãªãƒ¢ãƒ€ãƒ³ãƒ•ã‚©ãƒ³ãƒˆ) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />

    <style>
        :root {
            --primary-color: #005694; /* ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ–ãƒ«ãƒ¼ */
            --secondary-color: #e0e6ec; /* ãƒ©ã‚¤ãƒˆã‚°ãƒ¬ãƒ¼ */
            --text-color: #333;
            --light-text-color: #f8f8f8;
            --slide-width: 90vw;
            --slide-height: 80vh;
        }

        body {
            margin: 0;
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #f5f7fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Swiperã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        .swiper {
            width: var(--slide-width);
            height: var(--slide-height);
            max-width: 1400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            background-color: white;
            position: relative;
        }

        .swiper-slide {
            display: flex;
            flex-direction: column;
            padding: 40px 60px;
            box-sizing: border-box;
            line-height: 1.6;
        }

        /* --- ãƒ˜ãƒƒãƒ€ãƒ¼/ãƒ•ãƒƒã‚¿ãƒ¼ã®ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        header {
            color: var(--primary-color);
            font-size: 0.9rem;
            border-bottom: 1px solid var(--secondary-color);
            padding-bottom: 15px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        
        footer {
            margin-top: auto; /* å¸¸ã«ä¸‹éƒ¨ã«å›ºå®š */
            padding-top: 15px;
            border-top: 1px solid var(--secondary-color);
            color: var(--text-color);
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 400;
        }

        /* --- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
            font-weight: 700;
            margin: 0 0 20px 0;
            line-height: 1.2;
        }

        /* ã‚¹ãƒ©ã‚¤ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        .content-area {
            flex-grow: 1;
            overflow-y: auto; /* æƒ…å ±é‡ãŒå¢—ãˆã¦ã‚‚ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã« */
            padding-right: 15px; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¨­ã‘ã‚‹ */
        }
        
        /* ç®‡æ¡æ›¸ãã¨æ®µè½ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        .content-area p {
            font-size: 1.1rem;
            color: var(--text-color);
            margin-bottom: 15px;
            white-space: pre-wrap; /* LLMã®æ•´å½¢ã‚’ç¶­æŒ */
        }

        .content-area ul, .content-area ol {
            padding-left: 20px;
            margin: 15px 0;
            font-size: 1.1rem;
        }
        
        .content-area li {
            margin-bottom: 8px;
            padding-left: 5px;
        }

        /* å¤ªå­—ã®å¼·åŒ– */
        .content-area strong {
            color: var(--primary-color);
            font-weight: 700;
            padding: 2px 0;
        }
        
        /* ç”»åƒææ¡ˆãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .image-suggestion {
            background-color: #f0f8ff; /* è–„ã„é’ã®èƒŒæ™¯ */
            border: 1px solid #cceeff;
            border-left: 5px solid var(--primary-color);
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 1rem;
            color: #1f3d61;
            font-weight: 600;
        }
        .image-suggestion span {
            font-weight: 400;
            color: #555;
            display: block;
            margin-top: 5px;
        }

        /* Swiper ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
        .swiper-button-next, .swiper-button-prev {
            color: var(--primary-color);
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .swiper-button-next:hover, .swiper-button-prev:hover {
            opacity: 1;
        }

        /* ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ‰ãƒƒãƒˆï¼‰ */
        .swiper-pagination-bullet-active {
            background: var(--primary-color);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ (ãƒ¢ãƒã‚¤ãƒ«å‘ã‘) */
        @media (max-width: 768px) {
            .swiper {
                width: 95vw;
                height: 90vh;
                border-radius: 0;
            }
            .swiper-slide {
                padding: 20px 30px;
            }
            h1 {
                font-size: 1.8rem;
            }
            .content-area p, .content-area li {
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>

<!-- Swiper -->
<div class="swiper">
    <div class="swiper-wrapper">
        {% for slide in slides %}
        <div class="swiper-slide">
            
            <header>
                <span>ã‚«ãƒŠãƒ€çµ¦æ¹¯å™¨é¸å®šã‚¬ã‚¤ãƒ‰ | å°‚é–€å®¶ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                <span>Slide {{ loop.index }} / {{ loop.length }}</span>
            </header>
            
            <h1>{{ slide.title }}</h1>
            
            <div class="content-area">
                <!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã§LLMã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æŒ¿å…¥ -->
                <p>{{ slide.body }}</p>
            </div>
            
            <footer>
                <span style="color: var(--primary-color); font-weight: 600;">[æ©Ÿå¯†æƒ…å ±] å¤–éƒ¨å…±æœ‰ç¦æ­¢</span>
                <span>æœ€çµ‚æ›´æ–°: 2025å¹´11æœˆ7æ—¥</span>
            </footer>
        </div>
        {% endfor %}
    </div>
    
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
    
    <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="swiper-pagination"></div>
</div>

<!-- Swiper JS -->
<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
<script>
    window.onload = function() {
        // Swiperã®åˆæœŸåŒ–
        const swiper = new Swiper('.swiper', {
            direction: 'horizontal', // æ¨ªã‚¹ãƒ©ã‚¤ãƒ‰
            loop: false, // ãƒ«ãƒ¼ãƒ—ãªã—
            effect: 'slide', // æ¨™æº–ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },

            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            
            keyboard: {
                enabled: true,
            },
            
            mousewheel: {
                enabled: true,
            }
        });
        
        // --- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ•´å½¢ï¼ˆå¤ªå­—ã€ç®‡æ¡æ›¸ãã€ç”»åƒææ¡ˆã®å‡¦ç†ï¼‰ ---
        document.querySelectorAll('.content-area p').forEach(p => {
            let htmlContent = p.textContent;
            
            // 1. **å¤ªå­—** ã‚’ <strong> ã‚¿ã‚°ã«å¤‰æ›
            // **ç”¨èª** -> <strong>ç”¨èª</strong>
            htmlContent = htmlContent.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

            // 2. å›³è§£ã‚¿ã‚° (ä¾‹: <<å›³è§£: ...>>) ã‚’å›³è§£ææ¡ˆãƒ–ãƒ­ãƒƒã‚¯ã«å¤‰æ›
            //  -> <div class="image-suggestion">...</div>
            // Geminiã®å‡ºåŠ›ã§ã¯ `<<å›³è§£: ç†±äº¤æ›ã®æ¨¡å¼å›³>>` ã‚„ `[[image: Tankless vs Storage]]` ãªã©ã®å½¢å¼ã§
            // å›³è§£ã‚¿ã‚°ãŒæŒ¿å…¥ã•ã‚Œã‚‹æƒ³å®šã®ãŸã‚ã€
            // ãã‚Œã‚‰ã‚’æ¤œå‡ºã—ã¦å°‚ç”¨ãƒ–ãƒ­ãƒƒã‚¯ã«ç½®ãæ›ãˆã‚‹ã€‚
            const imageTagRegex = /(?:<<\s*(?:å›³è§£|image)\s*:(.*?)>>|\[\[\s*(?:å›³è§£|image)\s*:(.*?)\]\])/gi;
            if (imageTagRegex.test(htmlContent)) {
                htmlContent = htmlContent.replace(imageTagRegex, (_, angleContent, bracketContent) => {
                    const content = (angleContent || bracketContent || '').trim();
                    if (!content) {
                        return '';
                    }
                    return `<div class="image-suggestion">ğŸ’¡ æ¨å¥¨å›³è§£: ${content}<span>ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã€ã“ã®å›³è§£ã‚’æŒ¿å…¥ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</span></div>`;
                });
            }

            // 3. ç®‡æ¡æ›¸ãï¼ˆ- ã¾ãŸã¯ *ï¼‰ã‚’ HTMLãƒªã‚¹ãƒˆæ§‹é€ ã«å¤‰æ›
            // LLMã®å‡ºåŠ›ã¯ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ãŸã‚ã€ç®‡æ¡æ›¸ãã®è¡Œã‚’æ¤œå‡ºã—ã¦<ul><li>ã«å¤‰æ›ã™ã‚‹
            const lines = htmlContent.split('\n');
            let isInsideList = false;
            let finalHtml = '';

            lines.forEach(line => {
                const trimmedLine = line.trim();
                const listItemMatch = trimmedLine.match(/^([-*])\s*(.*)/); // - ã¾ãŸã¯ * ã§å§‹ã¾ã‚‹è¡Œã‚’æ¤œå‡º

                if (listItemMatch) {
                    // ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®å ´åˆ
                    if (!isInsideList) {
                        finalHtml += '<ul>'; // ãƒªã‚¹ãƒˆé–‹å§‹
                        isInsideList = true;
                    }
                    finalHtml += `<li>${listItemMatch[2]}</li>`;
                } else {
                    // ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã§ã¯ãªã„å ´åˆ
                    if (isInsideList) {
                        finalHtml += '</ul>'; // ãƒªã‚¹ãƒˆçµ‚äº†
                        isInsideList = false;
                    }
                    // ãã®ä»–ã®è¦ç´ ï¼ˆç”»åƒææ¡ˆãƒ–ãƒ­ãƒƒã‚¯ã‚„æ™®é€šã®æ®µè½ï¼‰ã‚’è¿½åŠ 
                    if (trimmedLine) {
                        // ç”»åƒææ¡ˆãƒ–ãƒ­ãƒƒã‚¯ã¯ãã®ã¾ã¾å‡ºåŠ›ã—ã€ãã‚Œä»¥å¤–ã¯æ®µè½ã¨ã—ã¦ãƒ©ãƒƒãƒ—
                        if (trimmedLine.startsWith('<div class="image-suggestion"')) {
                            finalHtml += trimmedLine;
                        } else {
                            finalHtml += `<p>${trimmedLine}</p>`;
                        }
                    }
                }
            });

            if (isInsideList) {
                finalHtml += '</ul>'; // ãƒ«ãƒ¼ãƒ—çµ‚äº†æ™‚ã«ãƒªã‚¹ãƒˆãŒé–‰ã˜ã‚‰ã‚Œã¦ã„ãªã‘ã‚Œã°é–‰ã˜ã‚‹
            }

            // å…ƒã® <p> è¦ç´ ã‚’æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ç½®ãæ›ãˆã‚‹
            const newDiv = document.createElement('div');
            newDiv.innerHTML = finalHtml;
            p.parentNode.replaceChild(newDiv, p);
        });
    };
</script>

</body>
</html>